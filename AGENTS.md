# 게임 엔티티 시스템 (Game Entity System)

이 문서는 **Maze Escape** 프로젝트에서 사용되는 게임 오브젝트(엔티티)의 구조와 개발 가이드를 설명합니다.
모든 동적 오브젝트(몬스터, NPC 등)는 아래의 표준 패턴을 따르는 것을 권장합니다.

## 1. 엔티티 구조 (Entity Structure)

별도의 부모 클래스(`Agent` 등) 상속 없이, 각 클래스가 독립적으로 `THREE.Group`을 관리하는 구조입니다.

### 핵심 구성 요소
- **Scene 관리**: 생성 시 `scene.add`, 파괴 시 `scene.remove`.
- **3D 그룹 (`this.group`)**: 모든 메쉬(Mesh), 조명, 사운드 등을 하나의 그룹에 담아 관리.
- **상태 관리 (`this.state`)**: 유한 상태 기계(FSM) 패턴을 위한 상태 변수.
- **업데이트 루프 (`update`)**: 매 프레임 호출되어 로직과 애니메이션 처리.

---

## 2. 코드 예시 (Code Example)

## 3. 주요 메서드 설명 (Methods)

| 메서드 이름 | 역할 및 설명 |
| :--- | :--- |
| `constructor` | **생성자**. 3D 그룹을 만들고 씬에 등록합니다. 초기 상태와 모델을 설정합니다. |
| `_initModel` | **모델 생성**. `THREE.Mesh` 등을 생성하여 `this.group`에 추가합니다. |
| `update` | **메인 루프**. `PlayScene`에서 매 프레임 호출합니다. AI, 이동, 애니메이션을 처리합니다. |
| `setState` | **상태 제어**. 상태를 변경하고 `stateTimer`를 0으로 초기화하여 새로운 행동을 시작합니다. |
| `destroy` | **삭제**. 씬에서 객체를 제거하고(remove), 사용된 자원(Geometry, Material)을 정리(dispose)합니다. |

## 4. 몬스터 (Monster) 구현 예시
`src/Monster.js`는 위 구조를 따르는 대표적인 구현체입니다.
- **초기화**: `type`에 따라 다른 몬스터 속성 설정
- **이동**: `MazeGenerator`를 참조하여 벽 충돌 체크 및 A* 경로 탐색
- **상속**: `Zombie`와 같은 구체적인 몬스터 클래스가 `Monster`를 상속받아 구현될 수 있습니다. (현재는 Monster가 기본 클래스 역할)


## 5. 기타
- 모든 설명은 한글로 작성
- 모든 주석도 한글로 작성
---
*문서 최종 수정일: 2026-02-10*
